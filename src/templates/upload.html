<!DOCTYPE html>
<html>
<link
        rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
        crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<head>
    <title>Upload</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
</head>
<body>

<style>
    div {
        text-align: center;
        padding: 10px;
    }

    body {
        font-family: Arial;
        margin: 10px 10px 10px 10px;
        padding: 0;
        color: white;
        text-align: center;
        background: #555652;
    }
</style>


<form id="upload-form" action="{{ url_for('upload') }}" method="POST" enctype="multipart/form-data">

    <div class="btn-group btn-group-toggle container" data-toggle="buttons">
        <label class="btn btn-secondary">
            <input type="radio" name="type" id="option1" autocomplete="off" value="Video"
                   onclick="selected('Video')"> Video
        </label>
        <label class="btn btn-secondary">
            <input type="radio" name="type" id="option2" autocomplete="off" value="Image"
                   onclick="selected('Image')"> Image
        </label>
    </div>


    <div>
        <strong>Files:</strong><br>
        <input id="file-picker" type="file" name="file" accept="image/*" multiple>
    </div>
    <div id="msg"></div>
    <div>
        <textarea rows="4" cols="50" name="description" form="upload-form">Enter description here...</textarea>
    </div>
    <div>
        <input type="submit" value="Upload!" id="upload-button">
    </div>
</form>

</body>
<script>
    var type;

    function selected(s) {
        type = s;
    }

    $("#file-picker").change(function () {
        var input = document.getElementById('file-picker');
        if (type === 'Image') {
            for (var i = 0; i < input.files.length; i++) {
                var ext = input.files[i].name.substring(input.files[i].name.lastIndexOf('.') + 1).toLowerCase()

                if ((ext == 'jpg') || (ext == 'png')) {
                    $("#msg").text("Files are supported")
                }
                else {
                    $("#msg").text("Files are NOT supported")
                    document.getElementById("file-picker").value = "";
                }
            }
        } else if (type === 'Video') {
            for (var i = 0; i < input.files.length; i++) {
                var ext = input.files[i].name.substring(input.files[i].name.lastIndexOf('.') + 1).toLowerCase()

                if ((ext == 'mp4') || (ext == 'mov' || (ext == 'avi'))) {
                    $("#msg").text("Files are supported")
                }
                else {
                    $("#msg").text("Files are NOT supported")
                    document.getElementById("file-picker").value = "";
                }
            }

        }
    });

</script>
</html>